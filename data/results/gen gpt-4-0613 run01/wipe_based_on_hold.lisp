(<- (desig:action-grounding ?action-designator (pp-plans:wipe ?resolved-action-designator))
      (spec:property ?action-designator (:type :wiping))
      (spec:property ?action-designator (:surface ?surface-designator))
      (desig:current-designator ?surface-designator ?current-surface-desig)
      (spec:property ?current-surface-desig (:type ?surface-type))
      (spec:property ?current-surface-desig (:name ?surface-name))
      (-> (spec:property ?action-designator (:arm ?arm))
          (true)
          (man-int:robot-free-hand ?_ ?arm))
      (lisp-fun man-int:get-surface-transform ?current-surface-desig ?surface-transform)
      (lisp-fun man-int:calculate-surface-areas ?surface-transform (?facing-robot-area ?bottom-area))
      (-> (man-int:surface-flat ?surface-type)
           (equal ?flat t)
           (equal ?flat nil))
      (-> (spec:property ?action-designator (:wipe-method ?wipe-method))
        (true)
        (and (lisp-fun man-int:get-action-wipe-methods ?surface-type ?arm ?surface-transform ?wipe-methods)
           (member ?wipe-method ?wipe-methods)))
      (lisp-fun man-int:get-action-wiping-effort ?surface-type ?effort)
      (lisp-fun man-int:get-action-wiper-opening ?surface-type ?wiper-opening)
      (equal ?surfaces (?current-surface-desig))
      (-> (equal ?arm :left)
          (and (lisp-fun man-int:get-action-trajectory :wiping ?arm ?wipe-method T ?surfaces
                         ?left-trajectory)
               (lisp-fun man-int:get-traj-poses-by-label ?left-trajectory :reaching
                         ?left-reach-poses)
               (lisp-fun man-int:get-traj-poses-by-label ?left-trajectory :wiping
                         ?left-wipe-poses))
          (and (equal ?left-reach-poses NIL)
               (equal ?left-wipe-poses NIL)))
      (-> (equal ?arm :right)
          (and (lisp-fun man-int:get-action-trajectory :wiping ?arm ?wipe-method T ?surfaces
                         ?right-trajectory)
               (lisp-fun man-int:get-traj-poses-by-label ?right-trajectory :reaching
                         ?right-reach-poses)
               (lisp-fun man-int:get-traj-poses-by-label ?right-trajectory :wiping
                         ?right-wipe-poses))
          (and (equal ?right-reach-poses NIL)
               (equal ?right-wipe-poses NIL)))
      (desig:designator :action ((:type :wiping)
                                 (:surface ?current-surface-desig)
                                 (:surface-name  ?surface-name)
                                 (:arm ?arm)
                                 (:wiper-opening ?wiper-opening)
                                 (:effort ?effort)
                                 (:wipe-method ?wipe-method)
                                 (:left-reach-poses ?left-reach-poses)
                                 (:right-reach-poses ?right-reach-poses)
                                 (:left-wipe-poses ?left-wipe-poses)
                                 (:right-wipe-poses ?right-wipe-poses)
                                 (:clean :cleaning))
                        ?resolved-action-designator)))